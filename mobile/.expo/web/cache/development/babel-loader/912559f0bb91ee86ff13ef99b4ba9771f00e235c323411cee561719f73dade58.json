{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { RectButton } from 'react-native-gesture-handler';\nimport heartOutlineIcon from \"../../assets/images/icons/heart-outline.png\";\nimport unfavoriteIcon from \"../../assets/images/icons/unfavorite.png\";\nimport whatsappIcon from \"../../assets/images/icons/whatsapp.png\";\nimport api from \"../../services/api\";\nimport styles from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CoachItem = function CoachItem(_ref) {\n  var coach = _ref.coach,\n    favorited = _ref.favorited;\n  var _useState = useState(favorited),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFavorited = _useState2[0],\n    setIsFavorited = _useState2[1];\n  function handleLinkToWhatsapp() {\n    api.post('connections', {\n      coach_id: coach.id\n    });\n    Linking.openURL(\"whatsapp://send?phone=\" + coach.whatsapp);\n  }\n  function handleToggleFavorite() {\n    return _handleToggleFavorite.apply(this, arguments);\n  }\n  function _handleToggleFavorite() {\n    _handleToggleFavorite = _asyncToGenerator(function* () {\n      var favorites = yield AsyncStorage.getItem('favorites');\n      var favoritesArray = [];\n      if (favorites) {\n        favoritesArray = JSON.parse(favorites);\n      }\n      if (isFavorited) {\n        var favoriteIndex = favoritesArray.findIndex(function (coachItem) {\n          return coachItem.id === coach.id;\n        });\n        favoritesArray.splice(favoriteIndex, 1);\n        setIsFavorited(false);\n      } else {\n        favoritesArray.push(coach);\n        setIsFavorited(true);\n      }\n      yield AsyncStorage.setItem('favorites', JSON.stringify(favoritesArray));\n    });\n    return _handleToggleFavorite.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.profile,\n      children: [_jsx(Image, {\n        style: styles.avatar,\n        source: {\n          uri: coach.avatar\n        }\n      }), _jsxs(View, {\n        style: styles.profileInfo,\n        children: [_jsx(Text, {\n          style: styles.name,\n          children: coach.name\n        }), _jsx(Text, {\n          style: styles.subject,\n          children: coach.subject\n        })]\n      })]\n    }), _jsx(Text, {\n      style: styles.bio,\n      children: coach.bio\n    }), _jsxs(View, {\n      style: styles.footer,\n      children: [_jsxs(Text, {\n        style: styles.price,\n        children: [\"Pre\\xE7o/hora \", '   ', _jsxs(Text, {\n          style: styles.priceValue,\n          children: [\"R$ \", coach.cost]\n        })]\n      }), _jsxs(View, {\n        style: styles.buttonsContainer,\n        children: [_jsx(RectButton, {\n          onPress: handleToggleFavorite,\n          style: [styles.favoriteButton, isFavorited ? styles.favorited : {}],\n          children: isFavorited ? _jsx(Image, {\n            source: unfavoriteIcon\n          }) : _jsx(Image, {\n            source: heartOutlineIcon\n          })\n        }), _jsxs(RectButton, {\n          onPress: handleLinkToWhatsapp,\n          style: styles.contactButton,\n          children: [_jsx(Image, {\n            source: whatsappIcon\n          }), _jsx(Text, {\n            style: styles.contactButtonText,\n            children: \"Entrar em contato\"\n          })]\n        })]\n      })]\n    })]\n  });\n};\nexport default CoachItem;","map":{"version":3,"names":["AsyncStorage","React","useState","View","Image","Text","Linking","RectButton","heartOutlineIcon","unfavoriteIcon","whatsappIcon","api","styles","jsx","_jsx","jsxs","_jsxs","CoachItem","_ref","coach","favorited","_useState","_useState2","_slicedToArray","isFavorited","setIsFavorited","handleLinkToWhatsapp","post","coach_id","id","openURL","whatsapp","handleToggleFavorite","_handleToggleFavorite","apply","arguments","_asyncToGenerator","favorites","getItem","favoritesArray","JSON","parse","favoriteIndex","findIndex","coachItem","splice","push","setItem","stringify","style","container","children","profile","avatar","source","uri","profileInfo","name","subject","bio","footer","price","priceValue","cost","buttonsContainer","onPress","favoriteButton","contactButton","contactButtonText"],"sources":["/home/anderson/workspace/REACTPOS/mobile/src/components/CoachItem/index.tsx"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState } from 'react';\nimport { View, Image, Text, Linking } from 'react-native';\nimport { RectButton } from 'react-native-gesture-handler';\n\nimport heartOutlineIcon from '../../assets/images/icons/heart-outline.png'\nimport unfavoriteIcon from '../../assets/images/icons/unfavorite.png'\nimport whatsappIcon from '../../assets/images/icons/whatsapp.png'\nimport api from '../../services/api';\n\nimport styles from './styles';\n\nexport interface Coach {\n  id: number;\n  avatar: string;\n  bio: string;\n  cost: number;\n  name: string;\n  subject: string;\n  whatsapp: string;\n}\n\ninterface CoachItemProps {\n  coach: Coach;\n  favorited: boolean;\n}\n\nconst CoachItem: React.FC<CoachItemProps> = ({ coach, favorited }) => {\n  const [isFavorited, setIsFavorited] = useState(favorited);\n  \n  function handleLinkToWhatsapp() {\n    api.post('connections', {\n      coach_id: coach.id,\n    });\n\n    Linking.openURL(`whatsapp://send?phone=${coach.whatsapp}`);\n  }\n\n  async function handleToggleFavorite() {\n    const favorites = await AsyncStorage.getItem('favorites');\n\n    let favoritesArray = [];\n\n    if (favorites) {\n      favoritesArray = JSON.parse(favorites);\n    }\n\n    if (isFavorited) {\n      const favoriteIndex = favoritesArray.findIndex((coachItem: Coach) => {\n        return coachItem.id === coach.id;\n      });\n\n      favoritesArray.splice(favoriteIndex, 1);\n\n      setIsFavorited(false);\n    } else {\n      favoritesArray.push(coach);\n\n      setIsFavorited(true);\n    }\n\n    await AsyncStorage.setItem('favorites', JSON.stringify(favoritesArray));\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.profile}>\n        <Image \n          style={styles.avatar}\n          source={{ uri: coach.avatar }}\n        />\n\n        <View style={styles.profileInfo}>\n          <Text style={styles.name}>{coach.name}</Text>\n          <Text style={styles.subject}>{coach.subject}</Text>\n        </View>\n      </View>\n\n      <Text style={styles.bio}>\n        {coach.bio}\n      </Text>\n\n      <View style={styles.footer}>\n        <Text style={styles.price}>\n          Pre√ßo/hora {'   '}\n          <Text style={styles.priceValue}>R$ {coach.cost}</Text>\n        </Text>\n\n        <View style={styles.buttonsContainer}>\n          <RectButton \n            onPress={handleToggleFavorite}\n            style={[\n              styles.favoriteButton, \n              isFavorited ? styles.favorited : {}\n            ]}\n          >\n            { isFavorited\n              ? <Image source={unfavoriteIcon} />\n              : <Image source={heartOutlineIcon} />\n            }\n          </RectButton>\n\n          <RectButton onPress={handleLinkToWhatsapp} style={styles.contactButton}>\n            <Image source={whatsappIcon} />\n            <Text style={styles.contactButtonText}>Entrar em contato</Text>\n          </RectButton>\n        </View>\n      </View>\n\n\n    </View>\n  );\n}\n\nexport default CoachItem;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}