{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { BorderlessButton, RectButton } from 'react-native-gesture-handler';\nimport { Feather } from '@expo/vector-icons';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport api from \"../../services/api\";\nimport CoachItem from \"../../components/CoachItem\";\nimport PageHeader from \"../../components/PageHeader\";\nimport styles from \"./styles\";\nimport { useFocusEffect } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction CoachList() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    coaches = _useState2[0],\n    setCoaches = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    favorites = _useState4[0],\n    setFavorites = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isFiltersVisible = _useState6[0],\n    setIsFiltersVisible = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    subject = _useState8[0],\n    setSubject = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    week_day = _useState10[0],\n    setWeekDay = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    time = _useState12[0],\n    setTime = _useState12[1];\n  function loadFavorites() {\n    AsyncStorage.getItem('favorites').then(function (response) {\n      if (response) {\n        var favoritedCoaches = JSON.parse(response);\n        var favoritedCoachesIds = favoritedCoaches.map(function (coach) {\n          return coach.id;\n        });\n        setFavorites(favoritedCoachesIds);\n      }\n    });\n  }\n  useFocusEffect(function () {\n    loadFavorites();\n  });\n  function handleToggleFiltersVisible() {\n    setIsFiltersVisible(!isFiltersVisible);\n  }\n  function handleFiltersSubmit() {\n    return _handleFiltersSubmit.apply(this, arguments);\n  }\n  function _handleFiltersSubmit() {\n    _handleFiltersSubmit = _asyncToGenerator(function* () {\n      loadFavorites();\n      var response = yield api.get('classes', {\n        params: {\n          subject: subject,\n          week_day: week_day,\n          time: time\n        }\n      });\n      setIsFiltersVisible(false);\n      setCoaches(response.data);\n    });\n    return _handleFiltersSubmit.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(PageHeader, {\n      title: \"Coaches dispon\\xEDveis\",\n      headerRight: _jsx(BorderlessButton, {\n        onPress: handleToggleFiltersVisible,\n        children: _jsx(Feather, {\n          name: \"filter\",\n          size: 20,\n          color: \"#fff\"\n        })\n      }),\n      children: isFiltersVisible && _jsxs(View, {\n        style: styles.searchForm,\n        children: [_jsx(Text, {\n          style: styles.label,\n          children: \"Mat\\xE9ria\"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          value: subject,\n          onChangeText: function onChangeText(text) {\n            return setSubject(text);\n          },\n          placeholder: \"Qual a mat\\xE9ria?\",\n          placeholderTextColor: \"#c1bccc\"\n        }), _jsxs(View, {\n          style: styles.inputGroup,\n          children: [_jsxs(View, {\n            style: styles.inputBlock,\n            children: [_jsx(Text, {\n              style: styles.label,\n              children: \"Dia da semana\"\n            }), _jsx(TextInput, {\n              style: styles.input,\n              value: week_day,\n              onChangeText: function onChangeText(text) {\n                return setWeekDay(text);\n              },\n              placeholder: \"Qual o dia?\",\n              placeholderTextColor: \"#c1bccc\"\n            })]\n          }), _jsxs(View, {\n            style: styles.inputBlock,\n            children: [_jsx(Text, {\n              style: styles.label,\n              children: \"Hor\\xE1rio\"\n            }), _jsx(TextInput, {\n              style: styles.input,\n              value: time,\n              onChangeText: function onChangeText(text) {\n                return setTime(text);\n              },\n              placeholder: \"Qual hor\\xE1rio?\",\n              placeholderTextColor: \"#c1bccc\"\n            })]\n          })]\n        }), _jsx(RectButton, {\n          onPress: handleFiltersSubmit,\n          style: styles.submitButton,\n          children: _jsx(Text, {\n            style: styles.submitButtonText,\n            children: \"Filtrar\"\n          })\n        })]\n      })\n    }), _jsx(ScrollView, {\n      style: styles.coachList,\n      contentContainerStyle: {\n        paddingHorizontal: 16,\n        paddingBottom: 16\n      },\n      children: coaches.map(function (coach) {\n        return _jsx(CoachItem, {\n          coach: coach,\n          favorited: favorites.includes(coach.id)\n        }, coach.id);\n      })\n    })]\n  });\n}\nexport default CoachList;","map":{"version":3,"names":["React","useState","ScrollView","View","Text","TextInput","BorderlessButton","RectButton","Feather","AsyncStorage","api","CoachItem","PageHeader","styles","useFocusEffect","jsx","_jsx","jsxs","_jsxs","CoachList","_useState","_useState2","_slicedToArray","coaches","setCoaches","_useState3","_useState4","favorites","setFavorites","_useState5","_useState6","isFiltersVisible","setIsFiltersVisible","_useState7","_useState8","subject","setSubject","_useState9","_useState10","week_day","setWeekDay","_useState11","_useState12","time","setTime","loadFavorites","getItem","then","response","favoritedCoaches","JSON","parse","favoritedCoachesIds","map","coach","id","handleToggleFiltersVisible","handleFiltersSubmit","_handleFiltersSubmit","apply","arguments","_asyncToGenerator","get","params","data","style","container","children","title","headerRight","onPress","name","size","color","searchForm","label","input","value","onChangeText","text","placeholder","placeholderTextColor","inputGroup","inputBlock","submitButton","submitButtonText","coachList","contentContainerStyle","paddingHorizontal","paddingBottom","favorited","includes"],"sources":["/home/anderson/workspace/REACTPOS/mobile/src/pages/CoachList/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ScrollView, View, Text, TextInput } from 'react-native';\nimport { BorderlessButton, RectButton } from 'react-native-gesture-handler';\nimport { Feather } from '@expo/vector-icons';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport api from '../../services/api';\n\nimport CoachItem, { Coach } from '../../components/CoachItem';\nimport PageHeader from '../../components/PageHeader';\n\nimport styles from './styles';\nimport { useFocusEffect } from '@react-navigation/native';\n\n\nfunction CoachList() {\n  const [coaches, setCoaches] = useState([]);\n  const [favorites, setFavorites] = useState<number[]>([]);\n  const [isFiltersVisible, setIsFiltersVisible] = useState(false);\n\n  const [subject, setSubject] = useState('');\n  const [week_day, setWeekDay] = useState('');\n  const [time, setTime] = useState('');\n\n  function loadFavorites() {\n    AsyncStorage.getItem('favorites').then(response => {\n      if (response) {\n        const favoritedCoaches = JSON.parse(response);\n        const favoritedCoachesIds = favoritedCoaches.map((coach: Coach) => {\n          return coach.id;\n        });\n\n        setFavorites(favoritedCoachesIds);\n      }\n    });\n  }\n\n  useFocusEffect(() => {\n    loadFavorites();\n  });\n\n  function handleToggleFiltersVisible() {\n    setIsFiltersVisible(!isFiltersVisible);\n  }\n\n  async function handleFiltersSubmit() {\n    loadFavorites();\n\n    const response = await api.get('classes', {\n      params: {\n        subject,\n        week_day,\n        time,\n      }\n    });\n\n    setIsFiltersVisible(false);\n    setCoaches(response.data);\n  }\n\n  return (\n    <View style={styles.container}>\n      <PageHeader \n        title=\"Coaches disponíveis\" \n        headerRight={(\n          <BorderlessButton onPress={handleToggleFiltersVisible}>\n            <Feather name=\"filter\" size={20} color=\"#fff\" />\n          </BorderlessButton>\n        )}\n      >\n        { isFiltersVisible && (\n          <View style={styles.searchForm}>\n            <Text style={styles.label}>Matéria</Text>\n            <TextInput\n              style={styles.input}\n              value={subject}\n              onChangeText={text => setSubject(text)}\n              placeholder=\"Qual a matéria?\"\n              placeholderTextColor=\"#c1bccc\"\n            />\n\n            <View style={styles.inputGroup}>\n              <View style={styles.inputBlock}>\n                <Text style={styles.label}>Dia da semana</Text>\n                <TextInput\n                  style={styles.input}\n                  value={week_day}\n                  onChangeText={text => setWeekDay(text)}\n                  placeholder=\"Qual o dia?\"\n                  placeholderTextColor=\"#c1bccc\"\n                />\n              </View>\n\n              <View style={styles.inputBlock}>\n                <Text style={styles.label}>Horário</Text>\n                <TextInput\n                  style={styles.input}\n                  value={time}\n                  onChangeText={text => setTime(text)}\n                  placeholder=\"Qual horário?\"\n                  placeholderTextColor=\"#c1bccc\"\n                />\n              </View>\n            </View>\n\n            <RectButton onPress={handleFiltersSubmit} style={styles.submitButton}>\n              <Text style={styles.submitButtonText}>Filtrar</Text>\n            </RectButton>\n          </View>\n        )}\n      </PageHeader>\n\n      <ScrollView\n        style={styles.coachList}\n        contentContainerStyle={{\n          paddingHorizontal: 16,\n          paddingBottom: 16,\n        }}\n      >\n        {coaches.map((coach: Coach) => {\n          return (\n            <CoachItem \n              key={coach.id} \n              coach={coach}\n              favorited={favorites.includes(coach.id)} \n            />\n          );\n        })}        \n      </ScrollView>\n    </View>\n  );\n}\n\nexport default CoachList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}